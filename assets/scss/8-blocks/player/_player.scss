// Player (b-player)
//
//
// Markup: 8-blocks/player/player.html
//
// Styleguide 8.1.3

// Multiline ellipsis.
// See: https://css-tricks.com/almanac/properties/l/line-clamp/
@mixin line-clamp($lineCount: 1) {
  display: -webkit-box;
  -webkit-line-clamp: $lineCount;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.b-player {
  --b-player-color-bg: #{$color-black-off};
  --b-player-color-text: #{$color-white-off};
  --b-player-min-height: #{ px-to-rem(70px) };

  background: var(--b-player-color-bg);
  color: var(--b-player-color-text);
  position: relative;
  width: 100%;

  display: flex;
  padding: 0;
  min-height: var(--b-player-min-height);

  a {
    color: inherit;
  }

  &__progress {
    border-radius: 0;
    height: $size-tiny;
    position: absolute;
    bottom: 100%;
    width: 100%;

    // Reset the default appearance
    appearance: none;

    &::-webkit-progress-bar {
      background-color: $color-white-off;
      border-radius: $border-radius-b;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.25) inset;
      height: $size-tiny;
      padding: 0;
      margin: 0;
    }

    &::-webkit-progress-value {
      background-color: $color-primary;
      border-radius: $border-radius-b;
      margin: 0;
    }
  }

  &__control {
    color: inherit;
    display: flex;
    align-items: center;

    opacity: 0.7;
    transition: opacity 0.2s;

    &:hover,
    &:focus,
    &:active {
      color: inherit;
      opacity: 1;
    }

    &[disabled] {
      opacity: 0.5;
    }

    &.-previous,
    &.-next {
      display: inline-flex;
    }

    &.-previous {
      margin-left: $size-s;
    }

    &.-next {
      margin-right: $size-s;
    }

    &.-play-pause {
      background: transparent;
      flex: 0 0 auto;
      margin-left: $size-xxs;
      margin-right: $size-xxs;
    }
  }

  &__control-label {
    display: inline-block;
    @include font-setting('secondary');
    font-size: $size-xs;
    @include line-clamp($lineCount: 3);
    width: 130px;

    :hover > &,
    :focus > & {
      text-decoration: underline;
    }

    [disabled] > & {
      text-decoration: none;
    }

    .-previous & {
      margin-left: $size-xxs;
    }

    .-next & {
      margin-right: $size-xxs;
    }
  }

  &__main {
    display: grid;
    grid-template-columns: 1fr min-content;
    grid-column-gap: $size-s;
    align-items: center;
    margin-left: $size-s;

    flex: 1 1 auto;
  }

  &__art {
    flex: 0 0 var(--b-player-min-height);

    img {
      display: block;
      height: auto;
    }
  }

  &__copy {
    padding: $size-tiny 0;
    overflow: hidden;
  }

  &__meta {
    margin-bottom: $size-tiny;

    &.-clamped {
      @include line-clamp($lineCount: 1);
    }
  }

  &__title {
    color: currentColor;
    line-height: $line-height-s;
    margin-top: 0;

    &.-clamped {
      @include line-clamp($lineCount: 1);
    }
  }

  &__divider {
    align-self: stretch;
    background: transparentize(black, 0.5);
    margin: 0 $size-m;
    width: 2px;
  }

  &__main-controls {
    display: inline-flex;
    margin-left: auto;

    @include breakpoint-min(bp-l) {
      margin-right: $size-b;
    }
  }

  &__live-badge {
    background: $color-wbez-red;
    border-radius: $border-radius-b;
    color: $color-white-pure;
    display: inline-block;
    font-size: $size-xs;
    margin-right: $size-tiny;
    padding: 0 0.3em;
    vertical-align: baseline;
  }
}
