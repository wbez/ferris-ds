// Image (wbz-image)
//
// An image in a story, typically with a caption and credit.  {{isProse}}
//
// This should be applied to a [`<figure>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/figure) element.
//
// ---
//
// ### General notes:
//
// - It's good practice to define an image height and width; this makes it possible for the browser to predictably lay out the page without screen jerk. (Our CMS inline image tool does this automatically.)
//  ```html
//  <img src="…" width="400" height="300" alt="…">
//  ```
//
// ---
//
// ### CMS notes:
//
// - **No need to use this class.** Our site applies the styles automatically.
//
// - Our CMS has a particular markup spec, generated by the inline image tool …
//  ```html
//  <!-- before -->
//  <img src="https://cdn.wbez.org/image/370813afc24045d7f938ede2243fdbc0" title="Portrait of Jacob Owen and Meghan Williams" data-source="WBEZ" data-img-id="6fc16e99-93c6-4605-8e87-315a80be39ee" data-byline="Manuel Martinez" data-caption="Jacob Owen (left) and Meghan Williams decided to get matching tattoos on a whim." style="width: 50%;" data-width="2240" data-height="3360" class="center-block">
//  ```
//
// - … which our site compiles to a proper `<figure>` element.
//  ```html
//  <!-- after -->
//  <figure class="center-block" style="width: 50%;">
//    <img src="https://api.wbez.org/v2/images/6fc16e99-93c6-4605-8e87-315a80be39ee.jpg?width=900&amp;height=1350&amp;mode=FILL" height="1350" width="900" alt="Portrait of Jacob Owen and Meghan Williams">
//    <figcaption class="c-caption">
//      <span>Jacob Owen (left) and Meghan Williams decided to get matching tattoos on a whim.</span>
//      <span class="c-caption__credit">Manuel Martinez / WBEZ</span>
//    </figcaption>
//  </figure>
//  ```
//
// ---
//
// ### Class modifiers:
// - `no-gutter-mobile` — Stretch the image to the full screen width on mobile. (Must be the child of a centered block to work properly.)
//
// no-gutter-mobile - &nbsp;
//
// Markup: cookbook/image/image.html
//
// Styleguide 11.0.1
figure.wbz-image {
  * + * {
    margin-top: $size-xxs;
  }

  .c-content & {
    margin-top: $size-xxl;
    margin-bottom: $size-l;
  }
}

.no-gutter-mobile {
  figcaption {
    @include breakpoint-max(bp-s) {
      padding-left: colspan(m, 4);
      padding-right: colspan(m, 4);
    }
  }
}

figure.wbz-image.l-full {
  // stylelint-disable-next-line declaration-no-important
  width: auto !important;

  img {
    width: 100%;
  }

  figcaption {
    max-width: calc(100% - 2 * #{$size-s});

    box-sizing: content-box;
    margin-left: colspan(m, 4);
    margin-right: colspan(m, 4);

    @include breakpoint-min(bp-s) {
      margin-left: colspan(m, 6);
      margin-right: colspan(m, 6);
    }

    @include breakpoint-min(bp-l) {
      margin-left: colspan(m, 12);
      margin-right: colspan(m, 12);
    }
  }
}
