<div class="c-flyout">
  <button
    aria-haspopup="true"
    aria-expanded="false"
    class="c-flyout__toggle c-button -s -round -primary"
  >
    Subscribe
    <i class="c-icon t-size-s ml-xxxs">
      <svg aria-hidden="true">
        <use xlink:href="#rss"></use>
      </svg>
    </i>
  </button>
  <ul class="subscribe-links c-flyout__items has-bg-white p-tiny">
    <li>
      <a href="#" class="c-button -xs">
        Apple Podcasts
      </a>
    </li>
    <li>
      <a href="#" class="c-button -xs">
        RSS Link
      </a>
    </li>
  </ul>
</div>

<script>
  const flyoutItems = document.querySelectorAll('.c-flyout');

  Array.prototype.forEach.call(flyoutItems, function(el) {
    const btn = el.querySelector('.c-flyout__toggle');

    // toggle menu display on btn click
    btn.addEventListener('click', function(event) {
      const expanded = btn.getAttribute('aria-expanded');

      if (expanded === 'true') btn.setAttribute('aria-expanded', 'false');
      else btn.setAttribute('aria-expanded', 'true');
    });

    // hide submenu if focus leaves flyout menu
    el.addEventListener('focusout', e => {
      if (!el.contains(e.relatedTarget))
        btn.setAttribute('aria-expanded', 'false');
    });
  });
</script>
